##
## Strfry Config for Mana Strategy Game
## Optimized for local development and game events
##

relay = {
    bind = "127.0.0.1"
    port = 7777
    nofiles = 1000000
    realIpHeader = ""
    info = {
        name = "Mana Strategy Local Relay"
        description = "Local Nostr relay for Mana Strategy game development"
        pubkey = ""
        contact = ""
    }
}

events = {
    # Reject events too far in the future (15 minutes)
    rejectEventsNewerThanSeconds = 900
    
    # Reject events older than 24 hours (game events expire)
    rejectEventsOlderThanSeconds = 86400
    
    # Ephemeral events (if used)
    rejectEphemeralEventsOlderThanSeconds = 60
    ephemeralEventsLifetimeSeconds = 300
    
    # Max event size (64KB should be plenty for game events)
    maxEventBytes = 65536
    
    # Game events don't need many tags, but allow reasonable limits
    maxNumTags = 100
    maxTagValSize = 1024
}

relay = {
    compression = {
        enabled = true
        slidingWindow = true
        maxWindowBits = 15
    }
}

database = {
    dbParams = {
        # Allow plenty of concurrent readers for game clients
        maxreaders = 256
        
        # 1GB should be plenty for local development
        mapsize = 1073741824
    }
}

logging = {
    # Minimal logging for local development
    dumpInAll = false
    dumpInEvents = false  
    dumpInReqs = false
    writePolicy = "auto"
}

negentropy = {
    enabled = true
    maxSyncEvents = 1000000
}

# No plugin needed for basic local relay
plugin = {
    writePolicy = {
        plugin = ""
    }
}